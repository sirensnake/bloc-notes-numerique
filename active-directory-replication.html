<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ” Active Directory - RÃ©plication</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
  <header>
    <div class="banner-container">
      <img src="img/banner.png" alt="BanniÃ¨re du site" class="banner-img">
    </div>
    <h1>ğŸ” Active Directory - RÃ©plication</h1>
    <nav>
      <ul class="main-menu">
        <li><a href="index.html">ğŸ  Accueil</a></li>
        <li class="dropdown">
          <a href="#">ğŸ§ Linux â–¼</a>
          <ul class="submenu">
            <li><a href="linux-utilisateurs.html">ğŸ‘¤ Utilisateurs</a></li>
            <li><a href="linux-fichiers.html">ğŸ“ Fichiers</a></li>
            <li><a href="linux-reseau.html">ğŸŒ RÃ©seau</a></li>
            <li><a href="linux-paquets.html">ğŸ“¦ Paquets</a></li>
            <li><a href="linux-securite.html">ğŸ” SÃ©curitÃ©</a></li>
            <li><a href="linux-shell.html">ğŸš Shell</a></li>
            <li><a href="linux-systeme.html">âš™ï¸ SystÃ¨me</a></li>
            <li><a href="linux-trucs.html">ğŸ§  Trucs</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#">ğŸ Python â–¼</a>
          <ul class="submenu">
            <li><a href="python-bases.html">ğŸ“˜ Bases</a></li>
            <li><a href="python-collections.html">ğŸ—‚ï¸ Collections</a></li>
            <li><a href="python-controle.html">ğŸ” ContrÃ´le</a></li>
            <li><a href="python-erreurs.html">âŒ Erreurs</a></li>
            <li><a href="python-fonctions.html">ğŸ› ï¸ Fonctions</a></li>
            <li><a href="python-fichiers.html">ğŸ“‚ Fichiers</a></li>
            <li><a href="python-modules.html">ğŸ§© Modules</a></li>
            <li><a href="python-poo.html">ğŸ›ï¸ POO</a></li>
            <li><a href="python-trucs.html">ğŸ§  Trucs</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#">ğŸªŸ Windows & Active Directory â–¼</a>
          <ul class="submenu">
            <li><a href="fiche-powershell.html">âš¡ PowerShell</a></li>
            <li><a href="windows.html">ğŸªŸ Windows</a></li>
            <li><a href="reseaux-windows.html">ğŸŒ RÃ©seaux</a></li>
            <li><hr></li>
            <li><a href="active-directory-presentation.html">ğŸ“š PrÃ©sentation</a></li>
            <li><a href="active-directory-replication.html">ğŸ” RÃ©plication</a></li>
            <li><a href="active-directory-fsmo.html">ğŸ“Œ RÃ´les FSMO</a></li>
            <li><a href="active-directory-gpo.html">ğŸ” GPO</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#">ğŸ’» Virtualisation â–¼</a>
          <ul class="submenu">
            <li><a href="fiche-vboxmanage-interactive.html">ğŸ“¦ VBoxManage</a></li>
          </ul>
        </li>
        <li><a href="fiche-docker.html">ğŸ³ Docker</a></li>
        <li><a href="fiche-git.html">ğŸ”§ Git</a></li>
        <li><a href="fiche-chocolatey.html">ğŸ« Chocolatey</a></li>
        <li class="dropdown">
          <a href="#">ğŸ¯ Quiz â–¼</a>
          <ul class="submenu">
            <li><a href="quiz-sommaire.html">ğŸ“‹ Sommaire des Quiz</a></li>
            <li><a href="quiz-OSI.html">ğŸ”€ ModÃ¨le OSI</a></li>
            <li><a href="quiz-protocoles.html">ğŸ“¡ Protocoles RÃ©seau</a></li>
            <li><a href="quiz-commandes.html">âŒ¨ï¸ Commandes RÃ©seau</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="intro">
      <p>La <strong>rÃ©plication Active Directory</strong> assure la synchronisation des donnÃ©es entre les contrÃ´leurs de domaine. Elle garantit la disponibilitÃ© des informations et la tolÃ©rance aux pannes dans l'infrastructure AD.</p>
    </section>

    <details class="sommaire">
      <summary>ğŸ“‘ Sommaire</summary>
      <ul>
        <li><a href="#concepts">Concepts de rÃ©plication</a></li>
        <li><a href="#topologie">Topologie de rÃ©plication</a></li>
        <li><a href="#monitoring">Surveillance de la rÃ©plication</a></li>
        <li><a href="#troubleshooting">DÃ©pannage</a></li>
        <li><a href="#commandes">Commandes utiles</a></li>
      </ul>
    </details>

    <section id="concepts">
      <h2>ğŸ“š Concepts de rÃ©plication</h2>
      <h3>Types de rÃ©plication :</h3>
      <ul>
        <li><strong>RÃ©plication intra-site</strong> : Rapide (par dÃ©faut toutes les 15 sec)</li>
        <li><strong>RÃ©plication inter-site</strong> : PlanifiÃ©e (par dÃ©faut toutes les 3 heures)</li>
      </ul>
      
      <h3>ModÃ¨le multi-maÃ®tre :</h3>
      <p>Chaque contrÃ´leur de domaine peut accepter des modifications, qui sont ensuite rÃ©pliquÃ©es :</p>
      <pre><code># USN (Update Sequence Number)
- NumÃ©ro unique attribuÃ© Ã  chaque modification
- Permet de suivre et ordonner les changements
- IncrÃ©mentÃ© Ã  chaque modification

# Propagation Dampening
- Ã‰vite la rÃ©plication en boucle
- Up-to-dateness Vectors pour suivre les USN</code></pre>
      
      <h3>Conflits de rÃ©plication :</h3>
      <ul>
        <li><strong>Version number</strong> : La version la plus rÃ©cente gagne</li>
        <li><strong>Timestamp</strong> : En cas d'Ã©galitÃ©, le timestamp le plus rÃ©cent</li>
        <li><strong>GUID</strong> : En dernier recours, le GUID le plus grand</li>
      </ul>
    </section>

    <section id="topologie">
      <h2>ğŸ”„ Topologie de rÃ©plication</h2>
      <h3>Connection Objects :</h3>
      <p>DÃ©finissent les chemins de rÃ©plication entre contrÃ´leurs :</p>
      <pre><code># Types de connections
1. Connections automatiques (KCC - Knowledge Consistency Checker)
2. Connections manuelles
3. Connections de pont de site</code></pre>
      
      <h3>Sites et sous-rÃ©seaux :</h3>
      <pre><code># CrÃ©er un site
New-ADReplicationSite -Name "Lyon"

# Associer un sous-rÃ©seau Ã  un site
New-ADReplicationSubnet -Name "10.0.1.0/24" -Site "Lyon"

# Lier les sites
New-ADReplicationSiteLink -Name "Paris-Lyon" -SitesIncluded "Paris","Lyon" -Cost 100 -ReplicationFrequencyInMinutes 180</code></pre>
      
      <h3>Bridge de site :</h3>
      <p>Permet la rÃ©plication transitive entre sites :</p>
      <pre><code># CrÃ©er un bridge
New-ADReplicationSiteLinkBridge -Name "Europe" -SiteLinksIncluded "Paris-Lyon","Lyon-Marseille"</code></pre>
    </section>

    <section id="monitoring">
      <h2>ğŸ‘€ Surveillance de la rÃ©plication</h2>
      <h3>Outils de monitoring :</h3>
      <pre><code># Repadmin - principal outil
repadmin /showrepl                    # Ã‰tat gÃ©nÃ©ral
repadmin /showrepl * /csv > rep.csv  # Export CSV
repadmin /replsummary                # RÃ©sumÃ© global

# DCDiag - diagnostic complet
dcdiag /test:replications
dcdiag /test:knowsofroleholders
dcdiag /q                            # Quick test

# PowerShell
Get-ADReplicationFailure -Target "DC01"
Get-ADReplicationPartnerMetadata -Target "DC01"</code></pre>
      
      <h3>MÃ©triques importantes :</h3>
      <table>
        <tr><th>MÃ©trique</th><th>Signification</th><th>Action</th></tr>
        <tr><td>Latence rÃ©plication</td><td>Temps de propagation</td><td>Optimiser topologie si >1h</td></tr>
        <tr><td>Erreurs 8606</td><td>Attributs insuffisants</td><td>VÃ©rifier schÃ©ma</td></tr>
        <tr><td>Erreurs 8614</td><td>Timeout rÃ©plication</td><td>VÃ©rifier rÃ©seau</td></tr>
      </table>
    </section>

    <section id="troubleshooting">
      <h2>ğŸ”§ DÃ©pannage</h2>
      <h3>ProblÃ¨mes courants :</h3>
      <pre><code># 1. Erreurs de rÃ©plication
repadmin /showrepl /errorsonly

# 2. Forcer la rÃ©plication
repadmin /syncall DC01 /AdeP

# 3. RÃ©soudre les conflits
repadmin /removelingeringobjects DC01 "DC=company,DC=com" DC02 /advisory_mode

# 4. VÃ©rifier la connectivitÃ©
repadmin /bind DC01
netdom query fsmo</code></pre>
      
      <h3>RÃ©initialisation de la rÃ©plication :</h3>
      <pre><code># Suppression complÃ¨te des mÃ©tadonnÃ©es
ntdsutil
metadata cleanup
select operation target
list sites
select site 0
list servers in site
select server 0
quit
remove selected server

# Reconstruire les connections
repadmin /kcc
</code></pre>
    </section>

    <section id="commandes">
      <h2>âŒ¨ï¸ Commandes utiles</h2>
      <h3>Repadmin - Commandes principales :</h3>
      <pre><code>repadmin /replsingle targetDC sourceDC "DN"    # Forcer rÃ©plication unique
repadmin /queue DC01                            # Voir la file d'attente
repadmin /showutdvec DC01 "DN"                 # Vector de mise Ã  jour
repadmin /viewlist *                           # Liste des connexions

# Options avancÃ©es
repadmin /syncall /A /e /q                     # Sync complÃ¨te, quiet mode
repadmin /showobjmeta DC01 "DN"                # MÃ©tadonnÃ©es objet
repadmin /bridgeheads                          # Afficher les bridge heads</code></pre>
      
      <h3>Diagnostics avancÃ©s :</h3>
      <pre><code># VÃ©rification complÃ¨te
dcdiag /c /e /v                               # Comprehensive test
dcdiag /test:advertising                      # Test publication
dcdiag /test:connectivity                     # Test connectivitÃ©

# Analyse des sites
dsquery site                                   # Liste des sites
dcdiag /test:intersite                        # Test rÃ©plication inter-site</code></pre>
    </section>

    <div class="bottom-buttons">
      <a class="button-return" href="index.html">ğŸ  Retour au sommaire gÃ©nÃ©ral</a>
      <button class="button" onclick="window.print()">ğŸ–¨ï¸ Exporter en PDF</button>
    </div>
  </main>

  <footer>
    <p>Â© 2025 Guillaume | Bloc-Note Technique ğŸ“š</p>
  </footer>

</body>
</html>